/*
 * Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */

@import "../../../mixins/_rounded.css";
@import "../../../mixins/_shadow.css";
@import "../../../mixins/_disabled.css";
@import "../../mixins/_button.css";
@import "@ckeditor/ckeditor5-ui/theme/mixins/_dir.css";

:root {
	--ck-menu-bar-menu-panel-max-width: 75vw;
	--ck-menu-bar-menu-item-min-width: 10em;
}

.ck.ck-menu-bar {
	display: flex;
	justify-content: flex-start;
	background: var(--ck-color-base-background);
	padding: var(--ck-spacing-small);
	gap: var(--ck-spacing-small);
}

.ck.ck-menu-bar__menu {
	display: block;

	/* Enable font size inheritance, which allows fluid UI scaling. */
	font-size: inherit;

	/*
	 * All menu buttons.
	 */
	& > .ck-menu-bar__menu__button {
		padding: var(--ck-list-button-padding);
		width: 100%;

		& > .ck-button__label {
			flex-grow: 1;
			width: 7em;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		&.ck-disabled > .ck-button__label {
			@mixin ck-disabled;
		}

		@mixin ck-dir ltr {
			&:not(.ck-button_with-text) {
				padding-left: var(--ck-spacing-small);
			}
		}

		@mixin ck-dir rtl {
			&:not(.ck-button_with-text) {
				padding-right: var(--ck-spacing-small);
			}
		}
	}

	/*
	 * Top-level menu buttons only.
	 */
	&.ck-menu-bar__menu_top-level > .ck-menu-bar__menu__button {
		padding: var(--ck-spacing-small) var(--ck-spacing-medium);
		min-height: unset;

		& .ck-button__label {
			width: unset;
			min-width: unset;
			line-height: unset;
		}

		&.ck-on {
			border-bottom-left-radius: 0;
			border-bottom-right-radius: 0;
		}

		& .ck-icon {
			display: none;
		}
	}

	/*
	 * All but top-level menu buttons.
	 */
	&:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button {
		border-radius: 0;

		&:focus {
			border-color: transparent;
			box-shadow: none;

			&:not(.ck-on) {
				background: var(--ck-color-button-default-hover-background);
			}
		}

		/* Spacing in buttons that miss the icon. */
		&:not(:has(.ck-button__icon)) > .ck-button__label {
			margin-left: calc(var(--ck-icon-size) - var(--ck-spacing-small));
		}

		& > .ck-menu-bar__menu__button__arrow {
			transform: rotate(-90deg);
			width: var(--ck-dropdown-arrow-size);
		}

		&.ck-disabled > .ck-menu-bar__menu__button__arrow {
			@mixin ck-disabled;
		}

		@mixin ck-dir ltr {
			& > .ck-menu-bar__menu__button__arrow {
				right: var(--ck-spacing-standard);

				/* A space to accommodate the triangle. */
				margin-left: var(--ck-spacing-standard);
			}
		}

		@mixin ck-dir rtl {
			& > .ck-menu-bar__menu__button__arrow {
				left: var(--ck-spacing-standard);

				/* A space to accommodate the triangle. */
				margin-right: var(--ck-spacing-small);
			}
		}
	}

	/*
	 * The panel.
	 */
	& > .ck-menu-bar__menu__panel {
		@mixin ck-rounded-corners;
		@mixin ck-drop-shadow;

		background: var(--ck-color-dropdown-panel-background);
		border: 1px solid var(--ck-color-dropdown-panel-border);
		bottom: 0;
		height: fit-content;
		z-index: var(--ck-z-panel);
		max-width: var(--ck-menu-bar-menu-panel-max-width);

		/* Corner border radius consistent with the button. */
		&.ck-menu-bar__menu__panel_position_es,
		&.ck-menu-bar__menu__panel_position_se {
			border-top-left-radius: 0;
		}

		&.ck-menu-bar__menu__panel_position_ws,
		&.ck-menu-bar__menu__panel_position_sw {
			border-top-right-radius: 0;
		}

		&.ck-menu-bar__menu__panel_position_en,
		&.ck-menu-bar__menu__panel_position_ne {
			border-bottom-left-radius: 0;
		}

		&.ck-menu-bar__menu__panel_position_wn,
		&.ck-menu-bar__menu__panel_position_nw {
			border-bottom-right-radius: 0;
		}

		&:focus {
			outline: none;
		}

		/*
		 * Styles of the content of the panel (list items and their buttons).
		 */
		& > .ck-list > .ck-list__item > .ck-button {
			border-radius: 0;

			& > .ck-button__label {
				min-width: var(--ck-menu-bar-menu-item-min-width);
			}

			/*
			 * Hovered items automatically get focused. Default focus styles look odd
			 * while moving across a huge list of items so let's get rid of them
			 */
			&:focus {
				border-color: transparent;
				box-shadow: none;

				&:not(.ck-on) {
					background: var(--ck-color-button-default-hover-background);
				}
			}
		}
	}
}
